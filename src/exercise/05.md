# Props Control

### ğŸ’¡ Props Control

## ğŸ“ Tes notes

Detaille ce que tu as appris ici
`src/exercise/05.md`ouÂ surÂ uneÂ pageÂ [Notion](https://go.mikecodeur.com/course-notes-template)

## Comprendre

Parfois, les devs veulent pouvoir gÃ©rer l'Ã©tat interne de notre composant depuis
l'extÃ©rieur. Le rÃ©ducteur d'Ã©tat leur permet de gÃ©rer les changements d'Ã©tat
effectuÃ©s lorsqu'un changement d'Ã©tat se produit, mais parfois les gens peuvent
vouloir faire eux-mÃªmes des changements d'Ã©tat. Nous pouvons leur permettre de
le faire avec une fonctionnalitÃ© appelÃ©e "Control Props". Cela ressemble
fortement aux composants contrÃ´lÃ©s.

Souvenons nous des composants non-contrÃ´lÃ©. Par exemple le `input` ou le
`textearea` de base.

```jsx
<input type="text" />
<textarea />
```

De base il contrÃ´le lui-mÃªme son Ã©tat (state interne). Mais si on souhaite un
comportement particulier, le simple fait de luis passer des props permet de
prendre la main sur le contrÃ´le des states interne.

Par exemple 2 champs textes contrÃ´lÃ©s.

```jsx
function ControlledInput() {
  const [inputValue, setInputValue] = React.useState('')
  const [textareaValue, setTextareaValue] = React.useState('')

  function handleChange(e) {
    setInputValue(e.target.value.substring(0, 30))
    setTextareaValue(e.target.value.toLowerCase())
  }

  return (
    <div>
      <input type="text" value={inputValue} onChange={handleChange} />
      <textarea value={textareaValue} onChange={handleChange} />
    </div>
  )
}
```

ğŸ“‘ Le liens ver doc
[composant contrÃ´lÃ©](https://fr.reactjs.org/docs/forms.html#controlled-components)

Des frameworks JavaScript modernes ont donc Ã©tÃ© crÃ©Ã©s pour relever certains des
dÃ©fis en crÃ©ant par programme le DOM plutÃ´t que de le dÃ©finir Ã  la main HTML.

## Exercice

Dans cet exercice nous avons crÃ©e un composant `<SuperCheckBox />` qui peut
prendre un `prop checked` et `onChange`. (de la mÃªme maniÃ¨re que le input ou le
textarea). Tu vas devoir faire en sorte que ces props prennent le contrÃ´le des
states.

## Bonus

### 1. ğŸš€ Ajouter un Warning

Il arrive souvent d'obtenir des message d'alerte du type pour nous prÃ©venir
comme par exemple.

```jsx
Warning: Input is changing an uncontrolled input of type text to be controlled
```

Dans cet exercice tu vas devoir implÃ©menter cela en utilisant warning

```jsx
import warning from 'warning'

warning(true, 'Attention !!!') // affiche un warning
warning(false, 'Attention !!!') // n'affiche pas un warning
```

Nous voulons que lorsque que `checked` est passer en `prop`, il soit accompagner
de `onChange`.

> Un prop `checked` est passÃ© Ã  `useCheckBox` sans `onChange` . Cela rendra la
> checkbox en lecture seule. Si vous voulez le rendre modifiable, ajouter
> `onChange`

Nous avons donc besoin de savoir si `onChange` est passÃ© en `props`. utilise par
exemple une de ces deux maniÃ¨res.

- `const hasOnChange = typeof onChange!= 'undefined'`
- `const hasOnChange = Boolean(onChange)`

Ensuite nous utilise `useEffect` pour afficher le warning

```jsx
React.useEffect(() => {
  warning(conditions, 'message')
}, [dependancies])
```

### 2. ğŸš€ Ajouter un Warning sur le changement de mode

Nous souhaitons maintenant ajouter un warning pour informer si le composant
passe d'un mode contrÃ´lÃ© en mode non contrÃ´lÃ© et vise versa

### 3. ğŸš€ Extraction des warnings dans des hooks personnalisÃ©s

Ces warning peut Ãªtre utiles ailleurs, nous allons donc les externaliser dans
des hooks personnalisÃ©s. Nous allons crÃ©er deux hooks en se basant sur cet
exemple de
[Reach ui](https://github.com/reach/reach-ui/blob/a376daec462ccb53d33f4471306dff35383a03a5/packages/utils/src/index.tsx#L407-L443)

- `useControlledCheckBoxWarning`
- `useOnChangeWarning`

### 4. ğŸš€ Masquer les warnings en production

Les warnings sont trÃ¨s utiles lors des phases de dÃ©veloppement mais ils sont Ã 
supprimer en production. Pour savoir si l'on est en mode production on peut
utiliser

`process.env.NODE_ENV === 'production'`

Conditionne l'exÃ©cution des Hooks avec cela.

## ğŸœ Feedback

Remplir le formulaire le
[formulaire de FeedBack](https://go.mikecodeur.com/cours-react-avis).
